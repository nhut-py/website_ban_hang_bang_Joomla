window.CoolClock=function(t){return this.init(t)},CoolClock.config={tickDelay:1e3,longTickDelay:15e3,defaultRadius:85,renderRadius:100,defaultSkin:"chunkySwiss",defaultFont:"15px sans-serif",showSecs:!0,showAmPm:!0,skins:{swissRail:{outerBorder:{lineWidth:2,radius:95,color:"black",alpha:1},smallIndicator:{lineWidth:2,startAt:88,endAt:92,color:"black",alpha:1},largeIndicator:{lineWidth:4,startAt:79,endAt:92,color:"black",alpha:1},hourHand:{lineWidth:8,startAt:-15,endAt:50,color:"black",alpha:1},minuteHand:{lineWidth:7,startAt:-15,endAt:75,color:"black",alpha:1},secondHand:{lineWidth:1,startAt:-20,endAt:85,color:"red",alpha:1},secondDecoration:{lineWidth:1,startAt:70,radius:4,fillColor:"red",color:"red",alpha:1}},chunkySwiss:{outerBorder:{lineWidth:4,radius:97,color:"black",alpha:1},smallIndicator:{lineWidth:4,startAt:89,endAt:93,color:"black",alpha:1},largeIndicator:{lineWidth:8,startAt:80,endAt:93,color:"black",alpha:1},hourHand:{lineWidth:12,startAt:-15,endAt:60,color:"black",alpha:1},minuteHand:{lineWidth:10,startAt:-15,endAt:85,color:"black",alpha:1},secondHand:{lineWidth:4,startAt:-20,endAt:85,color:"red",alpha:1},secondDecoration:{lineWidth:2,startAt:70,radius:8,fillColor:"red",color:"red",alpha:1}},chunkySwissOnBlack:{outerBorder:{lineWidth:4,radius:97,color:"white",alpha:1},smallIndicator:{lineWidth:4,startAt:89,endAt:93,color:"white",alpha:1},largeIndicator:{lineWidth:8,startAt:80,endAt:93,color:"white",alpha:1},hourHand:{lineWidth:12,startAt:-15,endAt:60,color:"white",alpha:1},minuteHand:{lineWidth:10,startAt:-15,endAt:85,color:"white",alpha:1},secondHand:{lineWidth:4,startAt:-20,endAt:85,color:"red",alpha:1},secondDecoration:{lineWidth:2,startAt:70,radius:8,fillColor:"red",color:"red",alpha:1}}},isIE:!!document.all,clockTracker:{},noIdCount:0},CoolClock.prototype={init:function(t){return this.canvasId=t.canvasId,this.skinId=t.skinId||CoolClock.config.defaultSkin,this.font=t.font||CoolClock.config.defaultFont,this.displayRadius=t.displayRadius||CoolClock.config.defaultRadius,this.renderRadius=t.renderRadius||CoolClock.config.renderRadius,this.showSecondHand="boolean"==typeof t.showSecondHand?t.showSecondHand:!0,this.gmtOffset=null!=t.gmtOffset&&""!=t.gmtOffset?parseFloat(t.gmtOffset):null,this.showDigital="boolean"==typeof t.showDigital?t.showDigital:!1,this.logClock="boolean"==typeof t.logClock?t.logClock:!1,this.logClockRev="boolean"==typeof t.logClock?t.logClockRev:!1,this.tickDelay=CoolClock.config[this.showSecondHand?"tickDelay":"longTickDelay"],this.canvas=document.getElementById(this.canvasId),this.canvas.setAttribute("width",2*this.displayRadius),this.canvas.setAttribute("height",2*this.displayRadius),this.canvas.style.width=2*this.displayRadius+"px",this.canvas.style.height=2*this.displayRadius+"px",this.scale=this.displayRadius/this.renderRadius,this.ctx=this.canvas.getContext("2d"),this.ctx.scale(this.scale,this.scale),CoolClock.config.clockTracker[this.canvasId]=this,this.active=!0,this.tickTimeout=null,this.tick(),this},fullCircleAt:function(t,i,e){this.ctx.save(),this.ctx.globalAlpha=e.alpha,this.ctx.lineWidth=e.lineWidth,CoolClock.config.isIE&&(this.ctx.lineWidth=this.ctx.lineWidth*this.scale),this.ctx.beginPath(),this.ctx.arc(t,i,e.radius,0,2*Math.PI,!1),CoolClock.config.isIE&&this.ctx.arc(t,i,e.radius,-.1,.1,!1),e.fillColor&&(this.ctx.fillStyle=e.fillColor,this.ctx.fill()),e.color&&(this.ctx.strokeStyle=e.color,this.ctx.stroke()),this.ctx.restore()},drawTextAt:function(t,i,e,o){o||(o=this.getSkin()),this.ctx.save(),this.ctx.font=o.font||this.font;var l=this.ctx.measureText(t);l.height||(l.height=0,this.ctx.textBaseline="middle"),this.ctx.fillText(t,i-l.width/2,e-l.height/2),this.ctx.restore()},lpad2:function(t){return(10>t?"0":"")+t},tickAngle:function(t){var i=3;return this.logClock?0==t?0:Math.log(t*i)/Math.log(60*i):this.logClockRev?(t=(60-t)%60,1-(0==t?0:Math.log(t*i)/Math.log(60*i))):t/60},timeText:function(t,i,e){var o=CoolClock.config;return""+(o.showAmPm?t%12==0?12:t%12:t)+":"+this.lpad2(i)+(o.showSecs?":"+this.lpad2(e):"")+(o.showAmPm?12>t?" am":" pm":"")},radialLineAtAngle:function(t,i){this.ctx.save(),this.ctx.translate(this.renderRadius,this.renderRadius),this.ctx.rotate(Math.PI*(2*t-.5)),this.ctx.globalAlpha=i.alpha,this.ctx.strokeStyle=i.color,this.ctx.lineWidth=i.lineWidth,CoolClock.config.isIE&&(this.ctx.lineWidth=this.ctx.lineWidth*this.scale),i.radius?this.fullCircleAt(i.startAt,0,i):(this.ctx.beginPath(),this.ctx.moveTo(i.startAt,0),this.ctx.lineTo(i.endAt,0),this.ctx.stroke()),this.ctx.restore()},render:function(t,i,e){var o=this.getSkin();this.ctx.clearRect(0,0,2*this.renderRadius,2*this.renderRadius),o.outerBorder&&this.fullCircleAt(this.renderRadius,this.renderRadius,o.outerBorder);for(var l=0;60>l;l++)l%5&&o.smallIndicator&&this.radialLineAtAngle(this.tickAngle(l),o.smallIndicator),!(l%5)&&o.largeIndicator&&this.radialLineAtAngle(this.tickAngle(l),o.largeIndicator);this.showDigital&&this.drawTextAt(this.timeText(t,i,e),this.renderRadius,this.renderRadius+this.renderRadius/2);var s=t%12*5+i/12,a=i+e/60,n=e;o.hourHand&&this.radialLineAtAngle(this.tickAngle(s),o.hourHand),o.minuteHand&&this.radialLineAtAngle(this.tickAngle(a),o.minuteHand),this.showSecondHand&&o.secondHand&&this.radialLineAtAngle(this.tickAngle(n),o.secondHand),CoolClock.config.isIE||(o.hourDecoration&&this.radialLineAtAngle(this.tickAngle(s),o.hourDecoration),o.minDecoration&&this.radialLineAtAngle(this.tickAngle(a),o.minDecoration),this.showSecondHand&&o.secondDecoration&&this.radialLineAtAngle(this.tickAngle(n),o.secondDecoration)),this.extraRender&&this.extraRender(t,i,e)},refreshDisplay:function(){if(null!=this.gmtOffset){var t=window["leoClockUpdate_"+this.gmtOffset+"_CoolClock"]();this.render(t.getHours(),t.getMinutes(),t.getSeconds())}else{var t=new Date;this.render(t.getHours(),t.getMinutes(),t.getSeconds())}},nextTick:function(){this.tickTimeout=setTimeout("CoolClock.config.clockTracker['"+this.canvasId+"'].tick()",this.tickDelay)},stillHere:function(){return null!=document.getElementById(this.canvasId)},stop:function(){this.active=!1,clearTimeout(this.tickTimeout)},start:function(){this.active||(this.active=!0,this.tick())},tick:function(){this.stillHere()&&this.active&&(this.refreshDisplay(),this.nextTick())},getSkin:function(){var t=CoolClock.config.skins[this.skinId];return t||(t=CoolClock.config.skins[CoolClock.config.defaultSkin]),t}},CoolClock.findAndCreateClocks=function(){for(var t=document.getElementsByTagName("canvas"),i=0;i<t.length;i++){var e=t[i].className.split(" ")[0].split(":");"CoolClock"==e[0]&&(t[i].id||(t[i].id="_coolclock_auto_id_"+CoolClock.config.noIdCount++),new CoolClock({canvasId:t[i].id,skinId:e[1],displayRadius:e[2],showSecondHand:"noSeconds"!=e[3],gmtOffset:e[4],showDigital:"showDigital"==e[5],logClock:"logClock"==e[6],logClockRev:"logClockRev"==e[6]}))}},window.jQuery&&jQuery(document).ready(CoolClock.findAndCreateClocks);